<header class='nav'>
    <nav class = 'nav-menu'>
        <a href='{{ absURL "" }}' class = 'nav-brand nav_item'>
          <img src="https://cdn.discordapp.com/attachments/490220076163792896/835612220364292136/oktestuyi.png">
        </a>
        {{ $index := 1 }}
        {{ range $.Site.Data.routes }}
        <div>
            <div id=item{{$index}} class="item" onmouseover="resizeContent('actual_content{{$index}}', 'item_block{{$index}}', 'left_item{{$index}}', 'right_image{{$index}}')"
                    onmouseout="hideContent('actual_content{{$index}}', 'item_block{{$index}}', 'left_item{{$index}}', 'right_image{{$index}}')">{{ .title }}
            </div><div class="arrow">â–²</div>  
        </div>
        
        {{ $index = add $index 1}}
        {{ end }}
        {{ $index := 1}}
        {{ range $.Site.Data.routes}}
        <div id="actual_content{{$index}}" class="actual_content" onmouseover="keepContent('actual_content{{$index}}', 'item_block{{$index}}', 'left_item{{$index}}', 'right_image{{$index}}')"
        onmouseout="hideContent('actual_content{{$index}}', 'item_block{{$index}}', 'left_item{{$index}}', 'right_image{{$index}}')">
        {{ range .sublinks}}
            <a href = {{ .url }} style="text-decoration: none;">
                <div class="item_block{{$index}}">
                    <div class="left_item{{$index}}">{{ .title }}</div>
                    <div class="right_image{{$index}}" style="background-image: url( {{ absURL .image }} );"></div>
                </div>
            </a>
        {{ end }}
        </div>
        {{ $index = add $index 1}}
        {{ end }}
    </nav>
</header>

<script>
    
    globalTimeout = null;

    function hideUnneededContent(container){
        accContents = document.getElementsByClassName("actual_content");
        for (var i = 0; i < accContents.length; i++){
            if (accContents[i].id !== container){
                accContents[i].style.marginTop = "-300px";
                accContents[i].style.position = "fixed";
            }
        }
    }

    function resizeContent(container, blocks, lefts, rights){
        hideUnneededContent(container);
        left = document.getElementsByClassName(lefts);
        right = document.getElementsByClassName(rights);
        block = document.getElementsByClassName(blocks);
        accContent = document.getElementById(container);
        for (var i = 0; i < block.length; i++){
            block[i].style.height = "150px";
            left[i].style.height = "150px";
            right[i].style.height = "150px";
        }
        accContent.style.marginTop = "-10px"
        accContent.style.position = "relative";
        setTimeout(function() { showContent(container) }, 200);
    }

    function showContent(container){
        document.getElementById(container).style.animation = "fadein 600ms forwards" //Times can be easily changed
    }

    function hideContent(container, blocks, lefts, rights){
        document.getElementById(container).style.animation = "fadeout 300ms forwards"
        globalTimeout = setTimeout(function(){ shrinkContent(container, blocks, lefts, rights) }, 310)
    }

    function shrinkContent(container, blocks, lefts, rights){
            left = document.getElementsByClassName(lefts)
            right = document.getElementsByClassName(rights);
            block = document.getElementsByClassName(blocks);
            accContent = document.getElementById(container);
            for (var i = 0; i < block.length; i++){
                block[i].style.height = "1px";
                left[i].style.height = "1px";
                right[i].style.height = "1px";
            }
            accContent.style.marginTop = "-300px";
            accContent.style.position = "fixed";
    }

    function keepContent(container, blocks, lefts, rights){
        clearTimeout(globalTimeout)
        document.getElementById(container).style.animationPlayState = 'paused'
    }

</script>
